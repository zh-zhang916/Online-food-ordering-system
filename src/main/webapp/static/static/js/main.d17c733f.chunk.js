(this.webpackJsonponlineorderfe=this.webpackJsonponlineorderfe||[]).push([[0],{144:function(t,e,n){},224:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(23),i=n.n(a),s=(n(144),n(32)),o=n(231),u=n(229),l=n(72),j=n(134),d=n(66),h=n(132),f=n(227),b=n(226),O=function(t){var e="/login?username=".concat(t.username,"&password=").concat(t.password);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to log in")}))},m=function(){return fetch("/cart").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get shopping cart data");return t.json()}))},p=n(139),g=n(10),x=l.a.Option,y=function(t){var e=t.itemId,n=Object(c.useState)(!1),r=Object(s.a)(n,2),a=r[0],i=r[1];return Object(g.jsx)(d.a,{title:"Add to shopping cart",children:Object(g.jsx)(h.a,{loading:a,type:"primary",icon:Object(g.jsx)(p.a,{}),onClick:function(){i(!0),function(t){return fetch("/order/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(e).then((function(){return j.b.success("Successfully add item")})).catch((function(t){return j.b.error(t.message)})).finally((function(){i(!1)}))}})})},v=function(){var t=Object(c.useState)([]),e=Object(s.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(),i=Object(s.a)(a,2),o=i[0],u=i[1],d=Object(c.useState)([]),h=Object(s.a)(d,2),O=h[0],m=h[1],p=Object(c.useState)(!1),v=Object(s.a)(p,2),S=v[0],w=v[1],C=Object(c.useState)(!1),F=Object(s.a)(C,2),I=F[0],E=F[1];return Object(c.useEffect)((function(){E(!0),fetch("/restaurants").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get restaurants");return t.json()})).then((function(t){m(t)})).catch((function(t){j.b.error(t.message)})).finally((function(){E(!1)}))}),[]),Object(c.useEffect)((function(){var t;o&&(w(!0),(t=o,fetch("/restaurant/".concat(t,"/menu")).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get menus");return t.json()}))).then((function(t){r(t)})).catch((function(t){j.b.error(t.message)})).finally((function(){w(!1)})))}),[o]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.a,{value:o,onSelect:function(t){return u(t)},placeholder:"Select a restaurant",loading:I,style:{width:300},onChange:function(){},children:O.map((function(t){return Object(g.jsx)(x,{value:t.id,children:t.name})}))}),o&&Object(g.jsx)(f.b,{style:{marginTop:20},loading:S,grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:4,xxl:4},dataSource:n,renderItem:function(t){return Object(g.jsx)(f.b.Item,{children:Object(g.jsxs)(b.a,{title:t.name,extra:Object(g.jsx)(y,{itemId:t.id}),children:[Object(g.jsx)("img",{src:t.imageUrl,alt:t.name,style:{height:240,width:"100%",display:"block"}}),"Price: ".concat(t.price)]})})}})]})},S=n(127),w=n(138),C=n(133),F=n(228),I=n(230),E=n(233),T=n(234),k=function(t){Object(w.a)(n,t);var e=Object(C.a)(n);function n(){var t;Object(S.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={loading:!1},t.onFinish=function(e){t.setState({loading:!0}),O(e).then((function(){j.b.success("Login Successful"),t.props.onSuccess()})).catch((function(t){j.b.error(t.message)})).finally((function(){t.setState({loading:!1})}))},t.render=function(){return Object(g.jsxs)(F.a,{name:"normal_login",onFinish:t.onFinish,style:{width:300,margin:"auto"},children:[Object(g.jsx)(F.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(g.jsx)(I.a,{prefix:Object(g.jsx)(E.a,{}),placeholder:"Username"})}),Object(g.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(g.jsx)(I.a.Password,{prefix:Object(g.jsx)(T.a,{}),placeholder:"Password"})}),Object(g.jsx)(F.a.Item,{children:Object(g.jsx)(h.a,{type:"primary",htmlType:"submit",loading:t.state.loading,children:"Login"})})]})},t}return n}(r.a.Component),P=n(232),L=n(235),B=u.a.Text,H=function(){var t=Object(c.useState)(!1),e=Object(s.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(),i=Object(s.a)(a,2),o=i[0],u=i[1],l=Object(c.useState)(!1),d=Object(s.a)(l,2),b=d[0],O=d[1],p=Object(c.useState)(!1),x=Object(s.a)(p,2),y=x[0],v=x[1];Object(c.useEffect)((function(){n&&(O(!0),m().then((function(t){u(t)})).catch((function(t){j.b.error(t.message)})).finally((function(){O(!1)})))}),[n]);var S=function(){r(!1)},w=function(t){v(!0),function(t){return fetch("/cart/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to remove the item");return m()}))}(t).then((function(t){j.b.success("Successfully remove item"),u(t)})).catch((function(t){j.b.error(t.message)})).finally((function(){v(!1)}))};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(h.a,{type:"primary",shape:"round",onClick:function(){r(!0)},children:"Cart"}),Object(g.jsx)(P.a,{title:"My Shopping Cart",onClose:S,visible:n,width:520,footer:Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(g.jsx)(B,{strong:!0,children:"Total price: $".concat(null===o||void 0===o?void 0:o.totalPrice)}),Object(g.jsxs)("div",{children:[Object(g.jsx)(h.a,{onClick:S,style:{marginRight:8},children:"Cancel"}),Object(g.jsx)(h.a,{onClick:function(){v(!0),fetch("/checkout").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to checkout")})).then((function(){j.b.success("Successfully checkout"),r(!1)})).catch((function(t){j.b.error(t.message)})).finally((function(){v(!1)}))},type:"primary",loading:y,disabled:b||0===(null===o||void 0===o?void 0:o.orderItemList.length),children:"Checkout"})]})]}),children:Object(g.jsx)(f.b,{loading:b,itemLayout:"horizontal",dataSource:null===o||void 0===o?void 0:o.orderItemList,renderItem:function(t){return Object(g.jsxs)(f.b.Item,{children:[Object(g.jsx)(f.b.Item.Meta,{title:t.menuItem.name,description:"$".concat(t.price)}),Object(g.jsx)(h.a,{onClick:function(){return w(t.id)},type:"primary",loading:y,icon:Object(g.jsx)(L.a,{}),disabled:b})]})}})})]})},M=o.a.Header,U=o.a.Content,q=u.a.Title;var A=function(){var t=Object(c.useState)(!1),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(g.jsxs)(o.a,{style:{height:"100vh"},children:[Object(g.jsx)(M,{children:Object(g.jsxs)("div",{className:"header",style:{display:"flex",justifyContent:"space-between"},children:[Object(g.jsx)(q,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Lai Food"}),n&&Object(g.jsx)("div",{children:Object(g.jsx)(H,{})})]})}),Object(g.jsx)(U,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(g.jsx)(v,{}):Object(g.jsx)(k,{onSuccess:function(){return r(!0)}})})]})},D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,236)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),c(t),r(t),a(t),i(t)}))};i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(A,{})}),document.getElementById("root")),D()}},[[224,1,2]]]);
//# sourceMappingURL=main.d17c733f.chunk.js.map